<section class="rounded-xl border border-slate-800 bg-slate-900/60">
    <header class="flex flex-wrap items-center justify-between gap-2 border-b border-slate-800 px-6 py-4">
        <div>
            <h2 class="text-lg font-medium text-slate-200">Items</h2>
            <p class="text-xs text-slate-500">Auto-refreshing every 2 seconds</p>
        </div>
        <p class="text-xs text-slate-500">
            @if (lastUpdatedAt(); as updatedAt) {
            Updated {{ updatedAt | date: 'mediumTime' }}
            } @else {
            Waiting for data…
            }
        </p>
    </header>

    <div class="relative">
        @if (isInitialLoading()) {
        <div class="flex h-48 items-center justify-center text-slate-400">
            <span class="animate-pulse">Loading items…</span>
        </div>
        } @else if (!hasItems()) {
        <div class="flex h-48 flex-col items-center justify-center gap-2 text-slate-400">
            <p class="text-sm">No items yet.</p>
            <p class="text-xs">Use the “Add item” button to create one.</p>
        </div>
        } @else {
        <div class="overflow-x-auto">
            <table class="w-full border-collapse text-left text-sm">
                <thead class="bg-slate-900/80 text-slate-400">
                    <tr>
                        <th class="px-6 py-3 font-medium">Identifier</th>
                        <th class="px-6 py-3 font-medium">Status</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-800/80 text-slate-200">
                    @for (item of items(); track item.id) {
                    <tr class="hover:bg-slate-900/80" data-testid="item-row">
                        <td class="px-6 py-4 font-mono text-xs md:text-sm">{{ item.id }}</td>
                        <td class="px-6 py-4">
                            <app-status-badge [status]="item.status" />
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
        }
    </div>

    @if (error(); as listError) {
    <div class="border-t border-slate-800 bg-red-500/10 px-6 py-3 text-sm text-red-200">
        {{ listError }}
    </div>
    }
</section>